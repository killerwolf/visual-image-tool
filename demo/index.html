<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>VisualImageTool – Démos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Prism.js for syntax highlighting -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css"
    />
    <style>
      body {
        font-family: system-ui, sans-serif;
        background: #f8f9fa;
        margin: 0;
        padding: 0;
        color: #222;
      }
      header {
        background: #222;
        color: #fff;
        padding: 2rem 1rem 1rem 1rem;
        text-align: center;
      }
      main {
        max-width: 1200px;
        margin: 2rem auto;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px #0001;
        padding: 2rem;
      }
      h1 {
        margin-top: 0;
        font-size: 2.2rem;
        letter-spacing: -1px;
      }
      ul {
        padding-left: 1.2em;
      }
      .demo-links {
        margin: 2rem 0;
        display: flex;
        flex-direction: column;
        gap: 0.7em;
      }
      .demo-links a {
        color: #1565c0;
        text-decoration: none;
        font-weight: 500;
        background: #e3eafc;
        padding: 0.6em 1em;
        border-radius: 6px;
        transition: background 0.2s;
        border: 1px solid #c3d3f3;
      }
      .demo-links a:hover {
        background: #d2e3fc;
      }
      code,
      pre {
        background: #f4f4f4;
        border-radius: 4px;
        font-size: 1em;
      }
      pre {
        padding: 1em;
        overflow-x: auto;
      }
      .section-title {
        margin-top: 2.5em;
        font-size: 1.3em;
        color: #444;
        border-bottom: 1px solid #eee;
        padding-bottom: 0.2em;
      }
      /* Demo styles from basic-usage.html */
      .main-demo-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 2.5em;
      }
      .main-demo-image-container {
        position: relative;
        border: 1px solid #e5e7eb;
        padding: 10px;
        border-radius: 8px;
        flex: 1;
        min-width: 300px;
        background: #fff;
      }
      .main-demo-image-container img {
        max-width: 100%;
        display: block;
        border-radius: 4px;
      }
      .main-demo-controls {
        flex: 1;
        min-width: 300px;
        background-color: #f9fafb;
        padding: 20px;
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        gap: 0.7em;
      }
      .main-demo-controls h2,
      .main-demo-controls h3 {
        margin-top: 0.5em;
        margin-bottom: 0.5em;
        font-size: 1.1em;
        color: #2563eb;
        font-weight: 600;
      }
      .main-demo-controls button {
        background-color: #2563eb;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 10px;
        margin-bottom: 10px;
        font-size: 1em;
        transition: background 0.2s;
      }
      .main-demo-controls button:hover {
        background-color: #1d4ed8;
      }
      .main-demo-output {
        margin-top: 10px;
        background-color: #f3f4f6;
        padding: 15px;
        border-radius: 4px;
        font-family: monospace;
        white-space: pre-wrap;
        font-size: 0.98em;
        color: #333;
      }
      .main-demo-code-example {
        background-color: #f3f4f6;
        padding: 15px;
        border-radius: 4px;
        font-family: monospace;
        white-space: pre-wrap;
        margin-top: 30px;
        font-size: 0.98em;
      }
      .jsfiddle-link {
        display: inline-block;
        margin: 1.5em 0 2em 0;
        padding: 0.7em 1.2em;
        background: #f7f7fa;
        border: 1px solid #c3d3f3;
        border-radius: 6px;
        color: #1565c0;
        font-weight: 500;
        text-decoration: none;
        transition: background 0.2s;
      }
      .jsfiddle-link:hover {
        background: #e3eafc;
        color: #0d47a1;
      }
      .jsfiddle-link svg {
        vertical-align: middle;
        margin-right: 0.4em;
        margin-bottom: 0.1em;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>VisualImageTool</h1>
      <p>
        Un outil léger en JavaScript vanilla pour définir des points focaux et
        zones de recadrage sur des images.
      </p>
    </header>
    <main>
      <h2 style="margin-bottom: 1.2em">Démo interactive</h2>
      <div class="main-demo-container">
        <div class="main-demo-image-container">
          <img
            id="demoImage"
            src="https://images.unsplash.com/photo-1501854140801-50d01698950b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1024&q=80"
            alt="Paysage de démonstration"
          />
        </div>
        <div class="main-demo-controls">
          <h2>Contrôles</h2>
          <button id="toggleFocusPoint">Activer Point Focal</button>
          <button id="toggleCropZone">Activer Zone de Recadrage</button>
          <h3>Données actuelles</h3>
          <div id="output" class="main-demo-output">
            Aucune donnée disponible
          </div>
          <h3>Actions</h3>
          <button id="centerFocusPoint">Centrer le Point Focal</button>
          <button id="resetCropZone">Réinitialiser la Zone de Recadrage</button>
        </div>
      </div>
      <a
        class="jsfiddle-link"
        href="https://jsfiddle.net/zuadgm4p/7/"
        target="_blank"
        rel="noopener"
      >
        <svg width="18" height="18" viewBox="0 0 32 32" fill="none">
          <rect width="32" height="32" rx="6" fill="#fff" />
          <path
            d="M16 3L3 9.5v13L16 29l13-6.5v-13L16 3zm0 2.2l10.2 5.1-4.5 2.2L16 7.5l-5.7 2.8-4.5-2.2L16 5.2zm-11 6.2l4.2 2.1v4.2l-4.2-2.1v-4.2zm11 15.4l-10.2-5.1 4.2-2.1 6 3v4.2zm1-5.6l-6.2-3.1v-4.2l6.2 3.1v4.2zm1 5.6v-4.2l6-3 4.2 2.1-10.2 5.1zm11-6.2l-4.2-2.1v-4.2l4.2-2.1v8.4zm-5.2-3.1l-6.2 3.1v-4.2l6.2-3.1v4.2z"
            fill="#1565c0"
          />
        </svg>
        Essayez en ligne sur JSFiddle
      </a>
      <div class="section-title">Utilisation sans installation</div>
      <p>
        Vous pouvez utiliser VisualImageTool directement dans vos pages HTML
        sans installer de dépendance, grâce au CDN
        <a
          href="https://www.jsdelivr.com/package/npm/@h4md1/visual-image-tool"
          target="_blank"
          rel="noopener"
          >jsdelivr</a
        >
        :
      </p>

      <div class="section-title">Démos rapides</div>
      <div class="demo-links">
        <a href="basic-usage.html">Usage basique</a>
        <a href="custom-config.html">Configuration personnalisée</a>
        <a href="preact-importmap-demo.html">Intégration Preact (importmap)</a>
        <a href="react-integration.jsx">Intégration React</a>
        <a href="vue-importmap-demo.html">Intégration Vue (importmap)</a>
        <a href="pp.html">Test PP</a>
        <a href="test.html">Test 1</a>
        <a href="test2.html">Test 2</a>
      </div>

      <div class="section-title">Fonctionnalités</div>
      <ul>
        <li>
          <strong>Point focal</strong> : Définissez un point d'intérêt sur
          l'image avec un marqueur visuel
        </li>
        <li>
          <strong>Zone de recadrage</strong> : Définissez une zone de recadrage
          avec poignées de redimensionnement
        </li>
        <li>
          <strong>Sans dépendances</strong> : Fonctionne sans bibliothèques
          externes
        </li>
        <li>
          <strong>API simple</strong> : Interface claire et facile à utiliser
        </li>
        <li>
          <strong>Personnalisable</strong> : Options de configuration flexibles
        </li>
        <li>
          <strong>Responsive</strong> : S'adapte aux redimensionnements d'écran
        </li>
      </ul>

      <div class="section-title">Installation</div>
      <pre><code class="language-bash">npm install @h4md1/visual-image-tool</code></pre>

      <div class="section-title">Guide de démarrage rapide</div>
      <ol>
        <li>
          <strong>Importation</strong>
          <pre><code class="language-js">// ES modules (recommandé)
import VisualImageTool from '@h4md1/visual-image-tool';

// CommonJS
const VisualImageTool = require('@h4md1/visual-image-tool');

// UMD (balise script)
<script src="node_modules/image-tool/dist/image-tool.umd.js"></script>
</code></pre>
        </li>
        <li>
          <strong>Initialisation</strong>
          <pre><code class="language-js">const imageTool = new VisualImageTool.VisualImageTool({
  imageElement: document.getElementById('myImage'),
  onChange: (data) => {
    console.log('Point focal:', data.focusPoint);
    console.log('Zone de recadrage:', data.cropZone);
  }
});</code></pre>
        </li>
        <li>
          <strong>Utilisation des fonctionnalités</strong>
          <pre><code class="language-js">// Activer le point focal
imageTool.toggleFocusPoint(true);

// Activer la zone de recadrage
imageTool.toggleCropZone(true);

// Définir manuellement un point focal
imageTool.setFocusPoint(x, y);

// Définir manuellement une zone de recadrage
imageTool.setCropZone(x, y, width, height);

// Obtenir les valeurs actuelles
const focusPoint = imageTool.getFocusPoint();
const cropZone = imageTool.getCropZone();
</code></pre>
        </li>
      </ol>

      <div class="section-title">Licence</div>
      <p>MIT</p>
    </main>
    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
    <!-- VisualImageTool UMD bundle -->
    <script src="../dist/visual-image-tool.umd.js"></script>
    <script>
      // Initialiser l'outil sur une image
      const imageTool = new VisualImageTool.VisualImageTool({
        imageElement: document.getElementById("demoImage"),
        onChange: (data) => {
          // Afficher les données mises à jour
          document.getElementById("output").textContent = JSON.stringify(
            data,
            null,
            2
          );
        },
      });

      // Activer/désactiver le point focal
      document
        .getElementById("toggleFocusPoint")
        .addEventListener("click", () => {
          imageTool.toggleFocusPoint();
        });

      // Activer/désactiver la zone de recadrage
      document
        .getElementById("toggleCropZone")
        .addEventListener("click", () => {
          imageTool.toggleCropZone();
        });

      // Centrer le point focal
      document
        .getElementById("centerFocusPoint")
        .addEventListener("click", () => {
          const dimensions = imageTool.getImageDimensions();
          imageTool.setFocusPoint(dimensions.width / 2, dimensions.height / 2);
        });

      // Réinitialiser la zone de recadrage
      document.getElementById("resetCropZone").addEventListener("click", () => {
        const dimensions = imageTool.getImageDimensions();
        const width = dimensions.width / 2;
        const height = dimensions.height / 2;
        imageTool.setCropZone(
          (dimensions.width - width) / 2,
          (dimensions.height - height) / 2,
          width,
          height
        );
      });
    </script>
  </body>
</html>
